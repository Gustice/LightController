Version 4
SHEET 1 1360 680
WIRE 192 -256 176 -256
WIRE 256 -256 192 -256
WIRE 496 -256 256 -256
WIRE 1200 -240 1200 -272
WIRE 256 -224 256 -256
WIRE 496 -224 496 -256
WIRE 256 -112 256 -160
WIRE 256 0 256 -32
WIRE 880 32 784 32
WIRE 64 80 64 64
WIRE 208 80 64 80
WIRE 880 80 880 32
WIRE 64 112 64 80
WIRE -320 128 -320 96
WIRE -208 128 -208 96
WIRE 256 128 256 96
WIRE 1200 144 1200 -176
WIRE 192 160 112 160
WIRE 496 160 496 -160
WIRE 1040 176 1008 176
WIRE 192 192 192 160
WIRE 336 192 304 192
WIRE 1136 192 1104 192
WIRE 64 208 64 192
WIRE 432 208 400 208
WIRE 880 208 880 160
WIRE 1040 208 880 208
WIRE -320 224 -320 208
WIRE -208 224 -208 208
WIRE 336 224 272 224
WIRE 784 240 784 32
WIRE 880 240 880 208
WIRE 112 256 112 160
WIRE 1008 272 1008 176
WIRE 1200 272 1200 240
WIRE 1200 272 1008 272
WIRE 192 288 192 272
WIRE 272 288 272 224
WIRE 272 288 192 288
WIRE 304 288 304 192
WIRE 496 288 496 256
WIRE 496 288 304 288
WIRE 1200 288 1200 272
WIRE 192 304 192 288
WIRE 496 304 496 288
WIRE 784 352 784 320
WIRE 880 352 880 320
WIRE 112 368 112 336
WIRE 1200 384 1200 368
WIRE 192 400 192 384
WIRE 496 416 496 384
WIRE 1152 464 1104 464
WIRE 448 496 400 496
WIRE 1200 528 1200 480
WIRE 496 560 496 512
FLAG 64 208 0
FLAG 256 128 0
FLAG 496 560 0
FLAG 112 368 0
FLAG -208 224 0
FLAG -208 96 5V
FLAG 368 176 5V
FLAG 368 240 0
FLAG 192 -256 5V
FLAG 64 64 Pulse
FLAG 400 496 Pulse
FLAG 1200 528 0
FLAG 1072 160 5V
FLAG 1072 224 0
FLAG -320 224 0
FLAG -320 96 3.3V
FLAG 1104 464 3.3V
FLAG 784 352 0
FLAG 1200 -272 5V
FLAG 880 352 0
FLAG 192 400 0
SYMBOL voltage 64 96 R0
WINDOW 3 24 96 Invisible 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PULSE(0 3.3 100u 10n 10n 100u 200u 10)
SYMATTR InstName V1
SYMBOL nmos 448 416 R0
WINDOW 3 -95 102 Left 2
SYMATTR Value IPD105N04L
SYMATTR InstName M2
SYMBOL npn 432 160 R0
SYMATTR InstName Q1
SYMATTR Value BC847A
SYMBOL res 480 288 R0
SYMATTR InstName R1
SYMATTR Value 1R5
SYMBOL Opamps\\UniversalOpamp2 368 208 R0
SYMATTR InstName U1
SYMBOL voltage 112 240 R0
WINDOW 3 24 96 Invisible 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PULSE(0 2.5 350u 10u 10u 400u 700u 5)
SYMATTR InstName V2
SYMBOL voltage -208 112 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 5V
SYMBOL res 240 -128 R0
SYMATTR InstName R2
SYMATTR Value 1R5
SYMBOL nmos 208 0 R0
WINDOW 3 -95 96 Left 2
SYMATTR Value IPD105N04L
SYMATTR InstName M1
SYMBOL nmos 1152 384 R0
SYMATTR InstName M3
SYMATTR Value IPD105N04L
SYMBOL npn 1136 144 R0
SYMATTR InstName Q2
SYMATTR Value BC847A
SYMBOL res 1184 272 R0
SYMATTR InstName R4
SYMATTR Value 1R5
SYMBOL Opamps\\UniversalOpamp2 1072 192 R0
SYMATTR InstName U2
SYMBOL LED 1184 -240 R0
SYMATTR InstName D3
SYMATTR Value LXHL-BW02
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL voltage -320 112 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 3.3V
SYMBOL voltage 784 224 R0
WINDOW 3 24 96 Invisible 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PULSE(0 3.3 0 1m 1m 10u 3m 5)
SYMATTR InstName V5
SYMBOL LED 480 -224 R0
SYMATTR InstName D1
SYMATTR Value LXHL-BW02
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL LED 240 -224 R0
SYMATTR InstName D2
SYMATTR Value LXHL-BW02
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL res 864 64 R0
SYMATTR InstName R3
SYMATTR Value 3k2
SYMBOL res 864 224 R0
SYMATTR InstName R5
SYMATTR Value 1k
SYMBOL res 176 176 R0
SYMATTR InstName R6
SYMATTR Value 3k2
SYMBOL res 176 288 R0
SYMATTR InstName R7
SYMATTR Value 1k
TEXT -48 440 Left 2 !.tran 1m
