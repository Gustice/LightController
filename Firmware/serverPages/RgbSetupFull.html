<!doctype html>
<html lang="en">

<head>
    <title>LightControl Interface</title>
    <link rel="stylesheet" href="/CommonStyles.css">
    <script src="/CommonScripts.js"></script>
</head>
<header>
    <h1>LED-Controller interface</h1>
    <p></p>
</header>

<body>
    <div class="myBody">
    <h2>Port 1: SyncSerial LED-Stripe</h2>
    <p>Connects LED stripes with synchronous serial protocol (e.g. APA102 or LC8822). Each LED can be assigned with a
        different color. </p>
    <object data="RgbiControl.html" width="800" height="170"> </object>

    <h2>Port 2: AsyncSerial LED-Stripe</h2>
    <p>Connects LED stripes with asynchronous serial RTZ-protocol (e.g. WS2812 or SK6812). Each LED can be assigned with
        a different color.<br>
        Note: There several Types available on the market. Some with RGBW-Channels, most with RGB-Channels.
    </p>
    <object data="RgbwControl.html" width="800" height="170"> </object>

    <h2>Port 3: RGB-LED-Stripe</h2>
    <p>Connects ordinary RGB-LED stripes. Whole stripe is illuminated in one color</p>
    <object data="RgbSingleControl.html" width="800" height="170"> </object>

    <h2>Port 4: LED-Expander</h2>
    <p>Connects LED-driver that are controled by gray values</p>
    <object data="GrayControl.html" width="800" height="300"> </object>

    <h2>Save Image</h2>
    <button onclick="onSave(1)">Safe to Page 1</button>
    <button onclick="onSave(2)">Safe to Page 2</button>
    <button onclick="onSave(3)">Safe to Page 3</button>
    <button onclick="onSave(4)">Safe to Page 4</button><br>
    <button onclick="onResetPages()">Reset Pages</button>
    
    <h2>Get Values</h2>
    <button onclick="onGet(this)">Get</button>
    <input readonly="true" type="text" name="Values" style="width: 60em;" ><br>
    </div>
    <script>
        function onSave( page){
            var xhr = new XMLHttpRequest();
            xhr.open("POST", "/SaveToPage", true);
            xhr.setRequestHeader('Content-Type', 'application/text');
            xhr.send(page);
        }
        function onResetPages(){
            var xhr = new XMLHttpRequest();
            xhr.open("POST", "/ResetProgramm", true);
            xhr.setRequestHeader('Content-Type', 'application/text');
            xhr.send();
        }

        function onGet( form ){
            var SetUrl = "/GetValues/RGBValues"
            console.log("sending to %s", SetUrl);

            var xhr = new XMLHttpRequest();
            xhr.onreadystatechange = function () {
                if (this.readyState != 4) return;
                if (this.status == 200) {
                    //var data = JSON.parse(this.responseText);
                    console.log(this.responseText);
                }
                // end of state change: it can be after some time (async)
            };
            xhr.open("GET", SetUrl, true);
            xhr.setRequestHeader('Content-Type', 'application/json');
            xhr.send();
        }
    </script>
</body>

</html>